"use strict";(self.webpackChunkchat_2_db=self.webpackChunkchat_2_db||[]).push([[64318,16406],{16406:(e,t,i)=>{i.r(t),i.d(t,{dyte_stage_toggle:()=>o});var a=i(67503),s=i(35461),l=i(11810),n=(i(60804),i(60614));const o=class{constructor(e){(0,a.r)(this,e),this.stateUpdate=(0,a.c)(this,"dyteStateUpdate",7),this.stageCallback=async()=>{var e,t,i,a,s,l,o;const d=null===(e=this.meeting.stage)||void 0===e?void 0:e.status;"ON_STAGE"===d&&await(null===(i=null===(t=null==this?void 0:this.meeting)||void 0===t?void 0:t.stage)||void 0===i?void 0:i.leave()),"OFF_STAGE"===d&&(null===(s=null===(a=null==this?void 0:this.meeting)||void 0===a?void 0:a.stage)||void 0===s||s.requestAccess(),(0,n.c)(this.meeting)&&this.stateUpdate.emit({activeJoinStage:!0})),"REQUESTED_TO_JOIN_STAGE"===d&&(null===(o=null===(l=null==this?void 0:this.meeting)||void 0===l?void 0:l.stage)||void 0===o||o.cancelRequestAccess())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=s.d,this.stageStatus="OFF_STAGE",this.state={label:"",disabled:!1,icon:""},this.t=(0,l.u)()}connectedCallback(){this.meetingChanged(this.meeting)}stageStatusHandler(e,t){this.stageStatus=t,"ACCEPTED_TO_JOIN_STAGE"===t&&(e.self.setupTracks({audio:!1,video:!1}),this.stateUpdate.emit({activeJoinStage:!0})),this.state=this.getState()}disconnectedCallback(){var e,t;null===(t=null===(e=this.meeting)||void 0===e?void 0:e.stage)||void 0===t||t.removeListener("stageStatusUpdate",(e=>this.stageStatusHandler(this.meeting,e)))}meetingChanged(e){var t,i,a,s;null!=e&&(this.stageStatus=null===(t=e.stage)||void 0===t?void 0:t.status,this.stageStatusHandler(e,null===(i=e.stage)||void 0===i?void 0:i.status),null===(s=null===(a=this.meeting)||void 0===a?void 0:a.stage)||void 0===s||s.on("stageStatusUpdate",(t=>this.stageStatusHandler(e,t))))}getState(){let e="",t="",i=!1;switch(this.stageStatus){case"ON_STAGE":t=this.iconPack.leave_stage,e="Leave Livestream",i=!1;break;case"ACCEPTED_TO_JOIN_STAGE":t=this.iconPack.join_stage,e="Join Livestream",i=!0;break;case"REQUESTED_TO_JOIN_STAGE":t=this.iconPack.join_stage,e="Requested",i=!1;break;default:t=this.iconPack.join_stage,e="Join Livestream",i=!1}return{label:e,disabled:i,icon:t}}render(){if((0,n.b)(this.meeting))return(0,a.h)(a.H,{title:this.state.label},(0,a.h)("dyte-tooltip",{placement:"top",kind:"block",label:this.state.label,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},(0,a.h)("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:this.state.label,icon:this.state.icon,onClick:this.stageCallback,disabled:this.state.disabled,showWarning:!1})))}static get watchers(){return{meeting:["meetingChanged"]}}};o.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);display:block}"},60804:(e,t,i)=>{i.d(t,{g:()=>l});const a={get:(e,t,i)=>(...a)=>{try{return Reflect.get(e,t,i).apply(e,a)}catch(s){return null}}};let s;try{s=new Proxy(localStorage,a)}catch(n){s=new Proxy({},a)}const l=s},60614:(e,t,i)=>{i.d(t,{P:()=>n,a:()=>s,b:()=>u,c:()=>r,d:()=>o,e:()=>d,i:()=>a,s:()=>l});const a=e=>!!l(e)&&("LIVESTREAM"===e.meta.viewType&&"ON_STAGE"!==e.stage.status),s=e=>{var t;return!!l(e)&&("LIVESTREAM"===e.meta.viewType&&(null===(t=null==e?void 0:e.self)||void 0===t?void 0:t.permissions.canLivestream))},l=e=>{var t;return(null===(t=null==e?void 0:e.self)||void 0===t?void 0:t.permissions.isV2)&&(null==e?void 0:e.livestream)};var n,o;!function(e){e.BUFFERING="Buffering",e.ENDED="Ended",e.IDLE="Idle",e.PLAYING="Playing",e.READY="Ready"}(n||(n={})),function(e){e.INITIALIZED="PlayerInitialized",e.QUALITY_CHANGED="PlayerQualityChanged",e.DURATION_CHANGED="PlayerDurationChanged",e.VOLUME_CHANGED="PlayerVolumeChanged",e.MUTED_CHANGED="PlayerMutedChanged",e.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",e.REBUFFERING="PlayerRebuffering",e.AUDIO_BLOCKED="PlayerAudioBlocked",e.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",e.ERROR="PlayerError",e.RECOVERABLE_ERROR="PlayerRecoverableError",e.ANALYTICS_EVENT="PlayerAnalyticsEvent",e.TIME_UPDATE="PlayerTimeUpdate",e.BUFFER_UPDATE="PlayerBufferUpdate",e.SEEK_COMPLETED="PlayerSeekCompleted",e.SESSION_DATA="PlayerSessionData",e.STATE_CHANGED="PlayerStateChanged",e.WORKER_ERROR="PlayerWorkerError",e.METADATA="PlayerMetadata",e.TEXT_CUE="PlayerTextCue",e.TEXT_METADATA_CUE="PlayerTextMetadataCue",e.AD_CUE="PlayerAdCue",e.STREAM_SOURCE_CUE="PlayerStreamSourceCue",e.NETWORK_UNAVAILABLE="PlayerNetworkUnavailable",e.SEGMENT_DISCONTINUITY="PlayerSegmentDiscontinuity",e.SEGMENT_METADATA="PlayerSegmentMetadata",e.PLAYER_METADATA="PlayerMetadata"}(o||(o={}));const d=[o.TIME_UPDATE,o.BUFFER_UPDATE,o.TEXT_METADATA_CUE,o.PLAYER_METADATA],r=e=>{var t,i,a,s,n,o;return!!l(e)&&("ALLOWED"===(null===(i=null===(t=null==e?void 0:e.self)||void 0===t?void 0:t.permissions)||void 0===i?void 0:i.canProduceAudio)||"ALLOWED"===(null===(s=null===(a=null==e?void 0:e.self)||void 0===a?void 0:a.permissions)||void 0===s?void 0:s.canProduceScreenshare)||"ALLOWED"===(null===(o=null===(n=null==e?void 0:e.self)||void 0===n?void 0:n.permissions)||void 0===o?void 0:o.canProduceVideo))},u=e=>{var t,i,a,s,n,o,d,r;return!!l(e)&&("NOT_ALLOWED"!==(null===(i=null===(t=null==e?void 0:e.self)||void 0===t?void 0:t.permissions)||void 0===i?void 0:i.canProduceAudio)||"NOT_ALLOWED"!==(null===(s=null===(a=null==e?void 0:e.self)||void 0===a?void 0:a.permissions)||void 0===s?void 0:s.canProduceScreenshare)||"NOT_ALLOWED"!==(null===(o=null===(n=null==e?void 0:e.self)||void 0===n?void 0:n.permissions)||void 0===o?void 0:o.canProduceVideo)||(null===(r=null===(d=null==e?void 0:e.self)||void 0===d?void 0:d.permissions)||void 0===r?void 0:r.canLivestream))}}}]);