"use strict";(self.webpackChunkchat_2_db=self.webpackChunkchat_2_db||[]).push([[2443,5373],{5049:(t,s,i)=>{i.d(s,{C:()=>o});var e=i(67503),a=i(72729),n=i(22906);const o=({name:t,time:s,now:i})=>(0,e.h)("div",{class:"head"},(0,e.h)("div",{class:"name"},(0,n.s)((0,n.f)(t),20)),(0,e.h)("div",{class:"time",title:(0,a.f)(s)},(0,a.e)(s,i)))},72729:(t,s,i)=>{i.d(s,{d:()=>e,e:()=>a,f:()=>n});const e=(t,s)=>{const i=s.getTime()-t.getTime();return Math.round(Math.abs(i/1e3/60))},a=(t,s)=>{const i=e(t,s);if(i<2)return"just now";if(i<60)return`${i}m ago`;const a=Math.round(i/60);if(i<90)return`about ${a}h ago`;if(a<24)return`${a}h ago`;const n=Math.round(a/24);if(n<7)return`${n}d ago`;return`${Math.round(n/7)}w ago`},n=t=>t.toDateString()+" "+t.toLocaleTimeString()},72443:(t,s,i)=>{i.r(s),i.d(s,{dyte_file_message:()=>r,dyte_image_message:()=>l,dyte_text_message:()=>u});var e=i(67503),a=i(5049),n=i(22906),o=i(92681),h=i(96396),c=i(69750),d=i(86466);const r=class{constructor(t){(0,e.r)(this,t),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=o.d,this.t=(0,c.u)()}render(){const t=(0,n.a)(this.message.link);return(0,e.h)(e.H,null,!this.isContinued&&(0,e.h)(a.C,{name:this.message.displayName,time:this.message.time,now:this.now}),(0,e.h)("div",{class:"body",part:"body"},(0,e.h)("div",{class:"file"},(0,e.h)("div",{class:"file-data"},(0,e.h)("div",{class:"name"},this.message.name),(0,e.h)("div",{class:"file-data-split"},(0,e.h)("div",{class:"ext"},(0,h.g)(this.message.name)),(0,e.h)("span",{class:"divider"}),(0,e.h)("div",{class:"size"},(0,h.a)(this.message.size)))),(0,e.h)("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>(0,h.d)(t,{name:this.message.name,fallbackName:"file"}),part:"button"},(0,e.h)("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t})))))}},l=class{constructor(t){(0,e.r)(this,t),this.stateUpdate=(0,e.c)(this,"dyteStateUpdate",7),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=o.d,this.t=(0,c.u)(),this.status="loading"}render(){return(0,e.h)(e.H,null,!this.isContinued&&(0,e.h)(a.C,{name:this.message.displayName,time:this.message.time,now:this.now}),(0,e.h)("div",{class:"body",part:"body"},(0,e.h)("div",{class:{image:!0,loaded:"loaded"===this.status}},(0,e.h)("img",{src:(0,n.a)(this.message.link),onLoad:()=>{this.status="loaded"},onError:()=>{this.status="errored"},onClick:()=>{"loaded"===this.status&&(this.stateUpdate.emit({image:this.message}),d.s.image=this.message)}}),"loading"===this.status&&(0,e.h)("div",{class:"image-spinner",title:this.t("Loading image"),"aria-label":this.t("Loading image")},(0,e.h)("dyte-spinner",{iconPack:this.iconPack,t:this.t})),"errored"===this.status&&(0,e.h)("div",{class:"image-errored",title:this.t("Image not found"),"aria-label":this.t("Image not found")},(0,e.h)("dyte-icon",{icon:this.iconPack.image_off,iconPack:this.iconPack,t:this.t})),"loaded"===this.status&&(0,e.h)("div",{class:"actions"},(0,e.h)("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>{this.stateUpdate.emit({image:this.message}),d.s.image=this.message},iconPack:this.iconPack,t:this.t},(0,e.h)("dyte-icon",{icon:this.iconPack.full_screen_maximize})),(0,e.h)("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>(0,h.d)(this.message.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},(0,e.h)("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t}))))))}};l.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.image-spinner{cursor:wait}.image-errored{cursor:not-allowed}";const m=/(https?:\/\/[^\s]+)/,g=({message:t})=>t.split("\n").map((t=>(0,e.h)("p",null,(t=>{const s=t.split(" "),i=s.length-1;return s.map(((t,s)=>m.test(t)?(0,e.h)("span",null,(0,e.h)("a",{href:t,target:"_blank",rel:"noopener noreferrer"},t),s!==i?" ":""):`${t}${s!==i?" ":""}`))})(t)))),u=class{constructor(t){(0,e.r)(this,t),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=o.d,this.t=(0,c.u)()}render(){return(0,e.h)(e.H,null,!this.isContinued&&(0,e.h)(a.C,{name:this.message.displayName,time:this.message.time,now:this.now}),(0,e.h)("div",{class:"body",part:"body"},(0,e.h)("div",{class:{text:!0,emoji:(0,n.h)(this.message.message)}},(0,e.h)(g,{message:this.message.message}))))}}},96396:(t,s,i)=>{i.d(s,{a:()=>n,d:()=>o,g:()=>a});var e=i(22906);const a=t=>t.split(/[#?]/)[0].split(".").pop().trim(),n=t=>{if(!t)return"0 B";const s=Math.floor(Math.log(t)/Math.log(1024));return`${(t/1024**s).toFixed(2)} ${["B","kB","MB","GB","TB"][s]}`},o=async(t,s)=>{t=(0,e.a)(t);let i=null==s?void 0:s.name;const a=await fetch(t);if(!a.ok)return void window.open(t,"_blank");const n=URL.createObjectURL(await a.blob()),o=document.createElement("a");o.href=n,o.download=null!=i?i:((t,s="file")=>{try{const i=new URL(t).pathname.split("/").pop();return"/"!==i?i:s}catch(i){return s}})(t,null==s?void 0:s.fallbackName),o.click()}}}]);