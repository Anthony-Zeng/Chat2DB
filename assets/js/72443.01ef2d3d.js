"use strict";(self.webpackChunkchat_2_db=self.webpackChunkchat_2_db||[]).push([[72443,55373],{72729:(t,e,s)=>{s.d(e,{d:()=>i,e:()=>a,f:()=>n});const i=(t,e)=>{const s=e.getTime()-t.getTime();return Math.round(Math.abs(s/1e3/60))},a=(t,e)=>{const s=i(t,e);if(s<2)return"just now";if(s<60)return`${s}m ago`;const a=Math.round(s/60);if(s<90)return`about ${a}h ago`;if(a<24)return`${a}h ago`;const n=Math.round(a/24);if(n<7)return`${n}d ago`;return`${Math.round(n/7)}w ago`},n=t=>t.toDateString()+" "+t.toLocaleTimeString()},72443:(t,e,s)=>{s.r(e),s.d(e,{dyte_file_message:()=>l,dyte_image_message:()=>u,dyte_text_message:()=>p});var i=s(67503),a=s(72729),n=s(22906),o=s(35461),r=s(96396),c=s(11810),h=s(86466);const d=({name:t,time:e,now:s})=>(0,i.h)("div",{class:"head"},(0,i.h)("div",{class:"name"},(0,n.s)((0,n.f)(t),20)),(0,i.h)("div",{class:"time",title:(0,a.f)(e)},(0,a.e)(e,s))),l=class{constructor(t){(0,i.r)(this,t),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=o.d,this.t=(0,c.u)()}render(){const t=(0,n.a)(this.message.link);return(0,i.h)(i.H,null,!this.isContinued&&(0,i.h)(d,{name:this.message.displayName,time:this.message.time,now:this.now}),(0,i.h)("div",{class:"body",part:"body"},(0,i.h)("div",{class:"file"},(0,i.h)("div",{class:"file-data"},(0,i.h)("div",{class:"name"},this.message.name),(0,i.h)("div",{class:"file-data-split"},(0,i.h)("div",{class:"ext"},(0,r.g)(this.message.name)),(0,i.h)("span",{class:"divider"}),(0,i.h)("div",{class:"size"},(0,r.a)(this.message.size)))),(0,i.h)("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>(0,r.d)(t,{name:this.message.name,fallbackName:"file"}),part:"button"},(0,i.h)("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t})))))}},u=class{constructor(t){(0,i.r)(this,t),this.stateUpdate=(0,i.c)(this,"dyteStateUpdate",7),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=o.d,this.t=(0,c.u)(),this.status="loading"}render(){return(0,i.h)(i.H,null,!this.isContinued&&(0,i.h)(d,{name:this.message.displayName,time:this.message.time,now:this.now}),(0,i.h)("div",{class:"body",part:"body"},(0,i.h)("div",{class:{image:!0,loaded:"loaded"===this.status}},(0,i.h)("img",{src:(0,n.a)(this.message.link),onLoad:()=>{this.status="loaded"},onError:()=>{this.status="errored"},onClick:()=>{"loaded"===this.status&&(this.stateUpdate.emit({image:this.message}),h.s.image=this.message)}}),"loading"===this.status&&(0,i.h)("div",{class:"image-spinner",title:this.t("Loading image"),"aria-label":this.t("Loading image")},(0,i.h)("dyte-spinner",{iconPack:this.iconPack,t:this.t})),"errored"===this.status&&(0,i.h)("div",{class:"image-errored",title:this.t("Image not found"),"aria-label":this.t("Image not found")},(0,i.h)("dyte-icon",{icon:this.iconPack.image_off,iconPack:this.iconPack,t:this.t})),"loaded"===this.status&&(0,i.h)("div",{class:"actions"},(0,i.h)("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>{this.stateUpdate.emit({image:this.message}),h.s.image=this.message},iconPack:this.iconPack,t:this.t},(0,i.h)("dyte-icon",{icon:this.iconPack.full_screen_maximize})),(0,i.h)("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>(0,r.d)(this.message.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},(0,i.h)("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t}))))))}};u.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif)}.image-spinner{cursor:wait}.image-errored{cursor:not-allowed}";const m=/(https?:\/\/[^\s]+)/,g=({message:t})=>t.split("\n").map((t=>(0,i.h)("p",null,(t=>{const e=t.split(" "),s=e.length-1;return e.map(((t,e)=>m.test(t)?(0,i.h)("span",null,(0,i.h)("a",{href:t,target:"_blank",rel:"noopener noreferrer"},t),e!==s?" ":""):`${t}${e!==s?" ":""}`))})(t)))),p=class{constructor(t){(0,i.r)(this,t),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=o.d,this.t=(0,c.u)()}render(){return(0,i.h)(i.H,null,!this.isContinued&&(0,i.h)(d,{name:this.message.displayName,time:this.message.time,now:this.now}),(0,i.h)("div",{class:"body",part:"body"},(0,i.h)("div",{class:{text:!0,emoji:(0,n.h)(this.message.message)}},(0,i.h)(g,{message:this.message.message}))))}}},96396:(t,e,s)=>{s.d(e,{a:()=>n,d:()=>o,g:()=>a});var i=s(22906);const a=t=>t.split(/[#?]/)[0].split(".").pop().trim(),n=t=>{if(!t)return"0 B";const e=Math.floor(Math.log(t)/Math.log(1024));return`${(t/1024**e).toFixed(2)} ${["B","kB","MB","GB","TB"][e]}`},o=async(t,e)=>{t=(0,i.a)(t);let s=null==e?void 0:e.name;const a=await fetch(t);if(!a.ok)return void window.open(t,"_blank");const n=URL.createObjectURL(await a.blob()),o=document.createElement("a");o.href=n,o.download=null!=s?s:((t,e="file")=>{try{const s=new URL(t).pathname.split("/").pop();return"/"!==s?s:e}catch(s){return e}})(t,null==e?void 0:e.fallbackName),o.click()}},86466:(t,e,s)=>{s.d(e,{o:()=>h,s:()=>c});var i=s(67503);const a=t=>!("isConnected"in t)||t.isConnected,n=((t,e)=>{let s;return(...i)=>{s&&clearTimeout(s),s=setTimeout((()=>{s=0,t(...i)}),e)}})((t=>{for(let e of t.keys())t.set(e,t.get(e).filter(a))}),2e3),o=t=>"function"==typeof t?t():t,r=(t,e)=>{const s=t.indexOf(e);s>=0&&(t[s]=t[t.length-1],t.length--)},{state:c,onChange:h}=((t,e)=>{const s=((t,e=((t,e)=>t!==e))=>{const s=o(t);let i=new Map(Object.entries(null!=s?s:{}));const a={dispose:[],get:[],set:[],reset:[]},n=()=>{var e;i=new Map(Object.entries(null!==(e=o(t))&&void 0!==e?e:{})),a.reset.forEach((t=>t()))},c=t=>(a.get.forEach((e=>e(t))),i.get(t)),h=(t,s)=>{const n=i.get(t);e(s,n,t)&&(i.set(t,s),a.set.forEach((e=>e(t,s,n))))},d="undefined"==typeof Proxy?{}:new Proxy(s,{get:(t,e)=>c(e),ownKeys:t=>Array.from(i.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(t,e)=>i.has(e),set:(t,e,s)=>(h(e,s),!0)}),l=(t,e)=>(a[t].push(e),()=>{r(a[t],e)});return{state:d,get:c,set:h,on:l,onChange:(e,s)=>{const i=l("set",((t,i)=>{t===e&&s(i)})),a=l("reset",(()=>s(o(t)[e])));return()=>{i(),a()}},use:(...t)=>{const e=t.reduce(((t,e)=>(e.set&&t.push(l("set",e.set)),e.get&&t.push(l("get",e.get)),e.reset&&t.push(l("reset",e.reset)),e.dispose&&t.push(l("dispose",e.dispose)),t)),[]);return()=>e.forEach((t=>t()))},dispose:()=>{a.dispose.forEach((t=>t())),n()},reset:n,forceUpdate:t=>{const e=i.get(t);a.set.forEach((s=>s(t,e,e)))}}})(t,e);return s.use((()=>{if("function"!=typeof i.a)return{};const t=new Map;return{dispose:()=>t.clear(),get:e=>{const s=(0,i.a)();s&&((t,e,s)=>{const i=t.get(e);i?i.includes(s)||i.push(s):t.set(e,[s])})(t,e,s)},set:e=>{const s=t.get(e);s&&t.set(e,s.filter(i.f)),n(t)},reset:()=>{t.forEach((t=>t.forEach(i.f))),n(t)}}})()),s})({})},22906:(t,e,s)=>{s.d(e,{a:()=>n,f:()=>o,g:()=>r,h:()=>a,s:()=>i});const i=(t,e=20)=>null==t?"":t.length>e?`${t.substring(0,e)}...`:t,a=t=>/^\p{Emoji}+$/u.test(t)&&!/^\d+$/.test(t),n=t=>(null==t?void 0:t.trim().toLowerCase().startsWith("javascript:"))?"https://dyte.io":t,o=t=>""===(t=null==t?void 0:t.trim())?"Participant":t;function r(t,e=2){return t.replace(/[^\u00BF-\u1FFF\u2C00-\uD7FF\w\s]/g,"").trim().split(/\s+/).slice(0,e).map((t=>t.charAt(0))).join("").toUpperCase()}}}]);